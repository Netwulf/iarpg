# Story 2.2: Character Sheet Display

## Status
Draft

## Story
**As a** User,
**I want** to view my character's full D&D 5e sheet with all stats, skills, spells, and equipment organized clearly,
**so that** I can reference my character's abilities during gameplay and track changes.

## Acceptance Criteria
1. Character sheet page is accessible at `/characters/{id}`
2. Sheet displays character header (name, race, class, level, avatar)
3. Sheet displays core stats (HP, AC, Initiative, Speed, Proficiency Bonus)
4. Sheet displays all 6 ability scores with modifiers in grid layout
5. Sheet displays saving throws with proficiency indicators
6. Sheet displays skills with proficiency indicators and click-to-roll
7. Sheet has tabbed interface (Stats, Skills, Combat, Spells, Inventory, Notes)
8. Sheet is responsive and works on mobile (320px+)

## Tasks / Subtasks

- [ ] Create character sheet page route (AC: 1)
  - [ ] Create `/characters/[id]` dynamic route
  - [ ] Fetch character data from API (GET `/api/characters/{id}`)
  - [ ] Handle loading state
  - [ ] Handle 404 if character not found or not owned by user

- [ ] Create character header component (AC: 2)
  - [ ] Display character name (editable inline)
  - [ ] Display race, class, level badge
  - [ ] Display avatar (placeholder if none)
  - [ ] Add "Edit" button linking to edit page
  - [ ] Show character creation date

- [ ] Create core stats panel (AC: 3)
  - [ ] HP display with current/max (e.g., "42/42")
  - [ ] AC display with shield icon
  - [ ] Initiative display with +/- modifier
  - [ ] Speed display in feet
  - [ ] Proficiency bonus display (+2)
  - [ ] Style as prominent stat boxes

- [ ] Create ability scores grid (AC: 4)
  - [ ] Display 6 ability scores in 3x2 grid
  - [ ] Each shows: score (large), modifier (small, e.g., +3)
  - [ ] Color-code modifiers (green positive, gray zero, red negative)
  - [ ] Add hover tooltip with ability name

- [ ] Create saving throws section (AC: 5)
  - [ ] List all 6 saving throws (STR, DEX, CON, INT, WIS, CHA)
  - [ ] Show modifier with proficiency bonus if applicable
  - [ ] Add filled circle indicator for proficient saves
  - [ ] Make clickable for future dice roll integration

- [ ] Create skills section (AC: 6)
  - [ ] List all 18 D&D 5e skills alphabetically
  - [ ] Show modifier for each skill (ability mod + prof if trained)
  - [ ] Add filled circle indicator for proficient skills
  - [ ] Add click-to-roll icon (future: triggers dice roll)
  - [ ] Group by ability score (optional enhancement)

- [ ] Implement tabbed interface (AC: 7)
  - [ ] Create Tabs component with 6 tabs
  - [ ] **Stats tab:** Ability scores, saves, skills (default)
  - [ ] **Combat tab:** Weapons, attack bonuses, damage (placeholder)
  - [ ] **Spells tab:** Spell slots, spell list (placeholder for casters)
  - [ ] **Inventory tab:** Equipment list (placeholder)
  - [ ] **Notes tab:** Character background, notes (textarea)
  - [ ] Persist active tab in URL query param

- [ ] Make sheet responsive (AC: 8)
  - [ ] Mobile (<640px): Stack stats vertically, single column
  - [ ] Tablet (640-1024px): 2-column layout for ability scores
  - [ ] Desktop (>1024px): Full 3-column layout
  - [ ] Use TailwindCSS responsive classes (sm:, md:, lg:)

- [ ] Add character sheet API endpoint (AC: 1)
  - [ ] GET `/api/characters/{id}` (already defined in Story 1.4)
  - [ ] Return character with all fields
  - [ ] Return 404 if character not found
  - [ ] Return 403 if user doesn't own character (future: or is table member)

- [ ] Style character sheet (AC: 2-8)
  - [ ] Use shadcn/ui Card components for stat panels
  - [ ] Use design tokens from Front-End Spec (black bg, green accents)
  - [ ] Add subtle borders and shadows for depth
  - [ ] Match Front-End Spec character sheet wireframe

## Dev Notes

### Character Sheet Layout
**[Source: PRD Section 3.3.2 - Character Sheet Wireframe]**

```
┌────────────────────────────────────────────┐
│ HEADER: [Avatar] Thorin Ironforge          │
│         Level 5 Dwarf Fighter              │
│         HP: 42/42  AC: 18  Init: +2        │
│         [+ HP] [- HP]                      │
└────────────────────────────────────────────┘

TABS: [ Stats ] Skills | Combat | Spells | Inventory | Notes

TAB: STATS

  Ability Scores (grid 3x2):
    ┌───────┐ ┌───────┐ ┌───────┐
    │  STR  │ │  DEX  │ │  CON  │
    │   16  │ │   14  │ │   15  │
    │   +3  │ │   +2  │ │   +2  │
    │ [Roll]│ │ [Roll]│ │ [Roll]│
    └───────┘ └───────┘ └───────┘
    ┌───────┐ ┌───────┐ ┌───────┐
    │  INT  │ │  WIS  │ │  CHA  │
    │   10  │ │   12  │ │    8  │
    │   +0  │ │   +1  │ │   -1  │
    │ [Roll]│ │ [Roll]│ │ [Roll]│
    └───────┘ └───────┘ └───────┘

  Saving Throws:
    Strength     +5 [●]  [Roll]
    Dexterity    +2 [ ]  [Roll]
    Constitution +4 [●]  [Roll]
    Intelligence +0 [ ]  [Roll]
    Wisdom       +1 [ ]  [Roll]
    Charisma     -1 [ ]  [Roll]

  Skills:
    Acrobatics (Dex)      +2 [ ]  [Roll]
    Animal Handling (Wis) +1 [ ]  [Roll]
    Athletics (Str)       +5 [●]  [Roll]
    Intimidation (Cha)    +1 [●]  [Roll]
    ...
```

### D&D 5e Skills List
**[Source: D&D 5e SRD]**

18 Skills with associated abilities:
- **STR:** Athletics
- **DEX:** Acrobatics, Sleight of Hand, Stealth
- **INT:** Arcana, History, Investigation, Nature, Religion
- **WIS:** Animal Handling, Insight, Medicine, Perception, Survival
- **CHA:** Deception, Intimidation, Performance, Persuasion

### Ability Score Modifiers
**[Source: D&D 5e rules]**

Formula: `(score - 10) / 2` (rounded down)

| Score | Modifier |
|-------|----------|
| 8-9   | -1       |
| 10-11 | +0       |
| 12-13 | +1       |
| 14-15 | +2       |
| 16-17 | +3       |
| 18-19 | +4       |
| 20    | +5       |

### Character API Response
**[Source: Architecture Section 5.1.3]**

```typescript
{
  character: {
    id: "clxxx",
    userId: "clyyyy",
    name: "Thorin Ironforge",
    race: "Dwarf",
    class: "Fighter",
    level: 5,

    strength: 16,
    dexterity: 14,
    constitution: 15,
    intelligence: 10,
    wisdom: 12,
    charisma: 8,

    proficiencyBonus: 3,
    hp: 42,
    maxHp: 42,
    ac: 18,
    initiative: 2,
    speed: 30,

    proficiencies: ["Athletics", "Intimidation", "Strength", "Constitution"],
    spells: [], // Empty for non-casters
    equipment: [...],

    background: "Soldier",
    notes: "A gruff dwarf fighter...",
    avatarUrl: null,

    createdAt: "2025-09-30T...",
    updatedAt: "2025-09-30T..."
  }
}
```

### UI Components
**[Source: Front-End Spec Section 6]**

shadcn/ui components to use:
- **Card** - Stat panels
- **Tabs** - Main navigation
- **Badge** - Level, proficiency indicators
- **Button** - Edit, roll dice
- **Avatar** - Character portrait
- **Separator** - Visual dividers

### Responsive Breakpoints
**[Source: Front-End Spec Section 9 - Responsiveness]**

```css
/* Mobile First */
sm: 640px   /* Tablet */
md: 768px   /* Small desktop */
lg: 1024px  /* Desktop */
xl: 1280px  /* Large desktop */
```

**Layout Strategy:**
- Mobile: Single column, stacked stats
- Tablet: 2 columns for ability scores
- Desktop: 3 columns, sidebar for quick stats

### Ability Score Component Example
```typescript
function AbilityScore({ score, name }: { score: number; name: string }) {
  const modifier = Math.floor((score - 10) / 2);
  const modifierText = modifier >= 0 ? `+${modifier}` : `${modifier}`;
  const modifierColor = modifier > 0 ? 'text-green-neon' : modifier < 0 ? 'text-red' : 'text-gray-400';

  return (
    <Card className="p-4 text-center">
      <div className="text-sm text-gray-400 uppercase">{name}</div>
      <div className="text-3xl font-bold">{score}</div>
      <div className={`text-lg ${modifierColor}`}>{modifierText}</div>
    </Card>
  );
}
```

### Testing

**Test scenarios:**
- Character sheet loads with correct data
- All ability scores display with correct modifiers
- Proficient saving throws show indicator
- Proficient skills show indicator
- Tab navigation works
- Responsive layout adapts to screen sizes
- 404 error if character not found
- Edit button navigates to edit page

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-30 | 1.0 | Initial story draft | Bob (SM) |

## Dev Agent Record
_To be filled by dev agent_

## QA Results
_To be filled by QA agent_
